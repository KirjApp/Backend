(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{106:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),i=t(8),r=t.n(i),c=t(17),o=t(40),m=t.n(o),u=function(e){return m.a.get("/api/books",{params:{q:"".concat(e),maxResults:12,projection:"full"}}).then((function(e){return e.data.data.items}))},s=function(e){return m.a.post("/api/myBooks",e).then((function(e){return e.data}))},d=function(e){return m.a.get("/api/myBooks/"+e).then((function(e){return e.data}))},E=t(57),v=t.n(E),p=t(145),g=t(147),A=t(160),b=t(149),f=t(10),h=t(58),I=t(150),y=t(151),j=t(163),k=t(161),C=t(162),x=t(152),w={.5:"Hy\xf6dyt\xf6n",1:"Hy\xf6dyt\xf6n+",1.5:"Huono",2:"Huono+",2.5:"Ok",3:"Ok+",3.5:"Hyv\xe4",4:"Hyv\xe4+",4.5:"Erinomainen",5:"Erinomainen+"},O=Object(p.a)((function(e){return{root:{flexGrow:1},inputRating:{width:200,height:50,display:"flex",alignItems:"center"},outputRating:{width:150,height:20,display:"flex",alignItems:"center"},message:{width:"70%","& > * + *":{marginTop:e.spacing(2)}},divider:{backgroundColor:"#E5E5E5"}}})),R=function(e){var a=Object(f.f)().id,t=Object(n.useState)(""),i=Object(c.a)(t,2),r=i[0],o=i[1],m=Object(n.useState)(""),u=Object(c.a)(m,2),E=u[0],p=u[1],R=Object(n.useState)([]),B=Object(c.a)(R,2),W=B[0],N=B[1],S=l.a.useState(0),L=Object(c.a)(S,2),z=L[0],G=L[1],H=l.a.useState(-1),J=Object(c.a)(H,2),Z=J[0],F=J[1],P=Object(n.useState)(null),T=Object(c.a)(P,2),K=T[0],Y=T[1],M=Object(n.useState)(""),U=Object(c.a)(M,2),D=U[0],Q=U[1],X=Object(n.useState)(""),V=Object(c.a)(X,2),q=V[0],_=V[1],$=O();Object(n.useEffect)((function(){var t=!0,n=e.books.filter((function(e){return e.id===a})).map((function(e){return e.volumeInfo.title}));return document.title="KirjApp "+q,d(a).then((function(e){t&&(_(n),e&&e.forEach((function(e){e.date=ee(e.date)})),N(e))})),function(){document.title="KirjApp",t=!1}}),[e.books,q,a]);var ee=function(e){return e.substr(11,5)+" GMT - "+e.substr(8,2)+"."+e.substr(5,2)+"."+e.substr(0,4)},ae=function(e){e.preventDefault();var t={book_id:a,writer:r,reviewtext:E,stars:z};o(""),p(""),G(0),s(t).then((function(e){N(e.reviews)})).catch((function(e){console.log(e),Y("Arvostelusi tallentamisessa tapahtui virhe"),Q("error")})),Y("Arvostelusi on tallennettu"),Q("success")};return l.a.createElement("div",null,l.a.createElement("br",null),e.books.filter((function(e){return e.id===a})).map((function(e){return l.a.createElement(g.a,{key:e.id,item:!0},l.a.createElement("div",{className:$.root},l.a.createElement(g.a,{container:!0,spacing:1},l.a.createElement(g.a,{container:!0,item:!0,xs:12,spacing:0,padding:0},l.a.createElement(g.a,{item:!0,xs:5},l.a.createElement(h.Img,{src:"imageLinks"in e.volumeInfo?"".concat(e.volumeInfo.imageLinks.smallThumbnail):"".concat(v.a),alt:"Book",width:"170px",height:"250px"}),l.a.createElement("div",{className:$.outputRating},"averageRating"in e.volumeInfo?l.a.createElement(j.a,{name:"read-only",value:e.volumeInfo.averageRating,precision:.5,readOnly:!0,size:"medium"}):l.a.createElement(j.a,{name:"read-only",value:0,precision:.5,readOnly:!0,size:"medium"}),l.a.createElement(b.a,{variant:"subtitle1"},"averageRating"in e.volumeInfo?l.a.createElement("div",null,"(",e.volumeInfo.averageRating,")"):l.a.createElement("div",null,"(0)")))),l.a.createElement(g.a,{item:!0,xs:7},l.a.createElement(b.a,{variant:"subtitle2"},e.volumeInfo.title),l.a.createElement("br",null),l.a.createElement(b.a,{variant:"body2"},"Tekij\xe4(t): ",e.volumeInfo.authors?e.volumeInfo.authors.join(", "):""),l.a.createElement("br",null),l.a.createElement(b.a,{variant:"caption"},"description"in e.volumeInfo?l.a.createElement("div",null,l.a.createElement(A.a,{id:"review",inputProps:{style:{fontSize:14}},value:e.volumeInfo.description,variant:"outlined",multiline:!0,size:"small",rows:"8",rowsMax:"8",fullWidth:!0,label:"Kuvaus:"})):l.a.createElement("div",null)))))))})),l.a.createElement(g.a,{container:!0,spacing:0},l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(b.a,{variant:"h6",color:"inherit"},"Kirjoita arvostelu"))),l.a.createElement(g.a,{container:!0,spacing:2},l.a.createElement("div",null,l.a.createElement(I.a,null,l.a.createElement("span",null,"\xa0"),l.a.createElement(A.a,{id:"writer",value:r,variant:"outlined",size:"small",onChange:function(e){o(e.target.value)},label:"Nimimerkki"}))),l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(I.a,null,l.a.createElement("span",null,"\xa0"),l.a.createElement(A.a,{id:"review",value:E,variant:"outlined",multiline:!0,size:"small",rowsMax:"4",fullWidth:!0,onChange:function(e){p(e.target.value)},label:"Kirjoita arvostelu"}),l.a.createElement("div",{className:$.inputRating},l.a.createElement(j.a,{name:"hover-feedback",value:z,precision:.5,onChange:function(e,a){G(a)},onChangeActive:function(e,a){F(a)}}),l.a.createElement("div",null,null!==z&&l.a.createElement(k.a,{ml:2,p:0},w[-1!==Z?Z:z])))),l.a.createElement("br",null),l.a.createElement(g.a,{container:!0,spacing:1},l.a.createElement(g.a,{container:!0,item:!0,xs:12,spacing:0,padding:0},l.a.createElement(g.a,{item:!0,xs:4},l.a.createElement("div",null,r&&E&&z?l.a.createElement(y.a,{variant:"contained",id:"addButton",onClick:ae}," L\xe4het\xe4"):l.a.createElement(y.a,{variant:"contained",id:"addButton",disabled:!0,onClick:ae}," L\xe4het\xe4"))),l.a.createElement(g.a,{item:!0,xs:8},l.a.createElement("div",{className:$.message},K?l.a.createElement(C.a,{severity:D},K):null)))))),l.a.createElement("br",null),l.a.createElement(g.a,{container:!0,spacing:0},l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(b.a,{variant:"h6",color:"inherit"},"KirjApp-k\xe4ytt\xe4jien antamat arvostelut:"),l.a.createElement("br",null))),W?W.map((function(e){return l.a.createElement("div",{key:e._id},l.a.createElement("div",{className:$.root},l.a.createElement(g.a,{container:!0,spacing:1},l.a.createElement(g.a,{container:!0,item:!0,xs:12,spacing:0,padding:0},l.a.createElement(g.a,{item:!0,xs:2},l.a.createElement(b.a,{variant:"caption"},"KirjApp t\xe4hdet:")),l.a.createElement(g.a,{item:!0,xs:4},l.a.createElement("div",{className:$.outputRating},l.a.createElement(j.a,{name:"read-only",value:e.stars,precision:.5,readOnly:!0,size:"small"}))),l.a.createElement(g.a,{item:!0,xs:6},l.a.createElement(b.a,{variant:"caption"},e.date))),l.a.createElement(g.a,{container:!0,item:!0,xs:12,spacing:0},l.a.createElement(g.a,{item:!0,xs:12},l.a.createElement(b.a,{variant:"caption"},'"',e.reviewtext,'" - ',e.writer))))),l.a.createElement(x.a,{className:$.divider}))})):l.a.createElement(b.a,{variant:"body1"},"Teokselle ei l\xf6ydy arvosteluja"))},B=t(61),W=t.n(B),N=t(153),S=t(65),L=t(30),z=t(154),G=t(155),H=t(157),J=t(156),Z=t(159),F=t(158),P=Object(p.a)((function(e){return{bookCard:{height:250,width:130,backgroundColor:"#E5E5E5",padding:e.spacing(0),flexWrap:"nowrap"},media:{height:120,width:130,alignItems:"center",justifyContent:"center"},filterTextField:{"& > *":{margin:e.spacing(1),width:"70ch"},backgroundColor:"#FFFFFF"},button:{display:"flex",flexWrap:"nowrap",minWidth:130,width:"100%"},appHeader:{flexGrow:1,width:"70ch"},typography:{fontSize:10}}})),T=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],i=a[1],r=Object(n.useState)(""),o=Object(c.a)(r,2),m=o[0],s=o[1],d=P();Object(n.useEffect)((function(){document.title="KirjApp";var e=!0;return""!==m.trim()&&m.trim().length>0&&u(m).then((function(a){e&&i(a)})),function(){return e=!1}}),[m]);return l.a.createElement("div",null,l.a.createElement(N.a,{maxWidth:"sm"},l.a.createElement("div",{className:d.appHeader},l.a.createElement(z.a,{position:"static"},l.a.createElement(G.a,{variant:"dense"},l.a.createElement(b.a,{variant:"h6",color:"inherit"},"KirjApp")))),l.a.createElement(f.c,null,l.a.createElement(f.a,{path:"/reviews/:id"},l.a.createElement("div",null,l.a.createElement(b.a,{variant:"body1"},l.a.createElement(L.b,{style:{padding:5},to:"/"},"Etusivu"))),l.a.createElement("br",null),l.a.createElement(R,{books:t})),l.a.createElement(f.a,{path:"/"},l.a.createElement("div",null,l.a.createElement(g.a,{container:!0,spacing:2},l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("form",{className:d.filterTextField,noValidate:!0,autoComplete:"off"},l.a.createElement(A.a,{id:"searchText",label:"Hae kirjoja",variant:"outlined",size:"small",onChange:function(e){e.target.value?i(t.filter((function(a){return a.volumeInfo.title.toLowerCase().includes(e.target.value.toLowerCase())}))):(s(""),i([])),s(e.target.value)}})))),l.a.createElement(g.a,{container:!0,spacing:0},l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(b.a,{variant:"subtitle1",color:"inherit"},"Hakutuloksia: ",t?t.length:0))),l.a.createElement(g.a,{container:!0,item:!0,xs:12},l.a.createElement(g.a,{container:!0,spacing:1},t?t.map((function(e){return l.a.createElement(g.a,{key:e.id,item:!0},l.a.createElement("div",{className:d.button},l.a.createElement(S.a,null,l.a.createElement(J.a,{component:L.b,to:"/reviews/".concat(e.id)},l.a.createElement(H.a,{className:d.bookCard},l.a.createElement(F.a,{className:d.media,image:"imageLinks"in e.volumeInfo?"".concat(e.volumeInfo.imageLinks.smallThumbnail):"".concat(W.a),alt:"Book",width:"80px",height:"100px"}),l.a.createElement(Z.a,null,"averageRating"in e.volumeInfo?l.a.createElement(j.a,{name:"read-only",value:e.volumeInfo.averageRating,precision:.5,readOnly:!0,size:"small"}):l.a.createElement(j.a,{name:"read-only",value:0,precision:.5,readOnly:!0,size:"small"}),l.a.createElement(b.a,{className:d.typography,variant:"caption",component:"h2"},e.volumeInfo.title),l.a.createElement(b.a,{className:d.typography,variant:"caption",color:"textSecondary",component:"p"},e.volumeInfo.authors?e.volumeInfo.authors.join(", "):"")))))))})):[])),l.a.createElement(g.a,{container:!0,spacing:0},l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(b.a,{variant:"h6",color:"inherit"}))))))))};r.a.render(l.a.createElement(L.a,null,l.a.createElement(T,null)),document.getElementById("root"))},57:function(e,a,t){e.exports=t.p+"static/media/KirjApp_logo2.8344431e.svg"},61:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAAFxJREFUWAnt0sENABAUBUH03zOihbk4rPsmP+PNfd/4+K2Pb3undaD+UIIJqoD2bTBBFdC+DSaoAtq3wQRVQPs2mKAKaN8GE1QB7dtggiqgfRtMUAW0b4MJqoD2Bz7qBEwOFkyKAAAAAElFTkSuQmCC"},77:function(e,a,t){e.exports=t(106)}},[[77,1,2]]]);
//# sourceMappingURL=main.d582d518.chunk.js.map